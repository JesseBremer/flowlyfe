<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Flowlyfe - Capture thoughts instantly, process them later">
    <meta name="theme-color" content="#5B8A72">

    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icons/icon-192x192.png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">

    <title>Flowlyfe</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <header>
            <h1>Flowlyfe</h1>
            <button id="viewInboxBtn" class="header-btn">
                Inbox <span id="inboxCount" class="count-badge">0</span>
            </button>
        </header>

        <main id="capturePage" class="page active">
            <div class="capture-container">
                <div class="capture-input-wrapper">
                    <textarea
                        id="captureInput"
                        placeholder="Flow your life..."
                        autofocus
                        rows="1"></textarea>
                    <button id="captureBtn" class="capture-btn">‚Üµ</button>
                </div>
            </div>
            <div id="captureStatus" class="status-message"></div>
        </main>

        <main id="inboxPage" class="page">
            <div class="page-header">
                <button class="nav-btn back-btn" data-page="capture">‚Üê Back</button>
                <h2>Inbox</h2>
            </div>
            <div id="inboxList" class="inbox-list">
                <!-- Items will be added here -->
            </div>
        </main>

        <main id="thoughtsPage" class="page">
            <div class="page-header">
                <button class="nav-btn back-btn" data-page="capture">‚Üê Back</button>
                <h2>Thoughts & Ideas</h2>
            </div>
            <div id="thoughtsList" class="category-list">
                <!-- Items will be added here -->
            </div>
        </main>

        <main id="todosPage" class="page">
            <div class="page-header">
                <button class="nav-btn back-btn" data-page="capture">‚Üê Back</button>
                <h2>To-Do Lists</h2>
            </div>

            <div class="todos-container">
                <section class="todo-section">
                    <h3>Active</h3>
                    <div id="activeTodosList" class="todo-list">
                        <!-- Active todos will be added here -->
                    </div>
                </section>

                <section class="todo-section">
                    <h3>Someday/Maybe</h3>
                    <div id="somedayTodosList" class="todo-list">
                        <!-- Someday todos will be added here -->
                    </div>
                </section>

                <section class="todo-section">
                    <h3>Awaiting</h3>
                    <div id="awaitingTodosList" class="todo-list">
                        <!-- Awaiting todos will be added here -->
                    </div>
                </section>
            </div>
        </main>

        <!-- Process Modal -->
        <div id="processModal" class="modal">
            <div class="modal-content">
                <h3>Process Item</h3>
                <div id="processContent" class="process-content"></div>

                <div class="process-buttons">
                    <button onclick="processTo('thoughts')" class="process-option thoughts-btn">
                        üí≠ Thought/Idea
                    </button>

                    <button onclick="processTo('contacts')" class="process-option contacts-btn">
                        üë§ Contact
                    </button>

                    <button onclick="processTo('calendar')" class="process-option calendar-btn">
                        üìÖ Calendar Event
                    </button>

                    <div class="todo-options">
                        <p class="option-label">To-Do:</p>
                        <button onclick="processTo('todos', 'active')" class="process-option todo-btn">
                            ‚úì Active
                        </button>
                        <button onclick="processTo('todos', 'someday')" class="process-option todo-btn">
                            ‚è≥ Someday
                        </button>
                        <button onclick="processTo('todos', 'awaiting')" class="process-option todo-btn">
                            ‚è±Ô∏è Awaiting
                        </button>
                    </div>
                </div>

                <button onclick="closeProcessModal()" class="modal-close">Cancel</button>
            </div>
        </div>

        <!-- Todo Detail Modal -->
        <div id="todoDetailModal" class="modal">
            <div class="modal-content">
                <h3>Task Details</h3>

                <div class="todo-edit-form">
                    <div class="form-group">
                        <label for="todoEditContent">Task</label>
                        <textarea id="todoEditContent" class="todo-edit-textarea" rows="5"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="todoEditDueDate">Due Date</label>
                        <input type="date" id="todoEditDueDate" class="todo-edit-input">
                    </div>

                    <div class="form-group">
                        <label for="todoEditDueTime">Due Time (optional)</label>
                        <input type="time" id="todoEditDueTime" class="todo-edit-input">
                    </div>

                    <div class="todo-detail-meta">
                        <p id="todoDetailTimestamp"></p>
                    </div>
                </div>

                <div class="process-buttons">
                    <button onclick="saveTodoFromDetail()" class="process-option" style="border-color: var(--primary-color); color: var(--primary-color); font-weight: 600;">
                        üíæ Save Changes
                    </button>
                    <button onclick="exportTodoToCalendar()" class="process-option calendar-btn" style="border-color: #D4A574;">
                        üìÖ Add to Calendar
                    </button>
                    <button onclick="moveTodoFromDetail()" class="process-option move-btn" style="border-color: var(--accent-water);">
                        ‚ÜîÔ∏è Move
                    </button>
                    <button onclick="deleteTodoFromDetail()" class="process-option" style="border-color: #C47B6B; color: #C47B6B;">
                        üóëÔ∏è Delete
                    </button>
                </div>

                <button onclick="closeTodoDetail()" class="modal-close">Close</button>
            </div>
        </div>

        <!-- Move Todo Modal -->
        <div id="moveModal" class="modal">
            <div class="modal-content">
                <h3>Move To-Do</h3>

                <div class="process-buttons">
                    <button onclick="moveToList('active')" class="process-option todo-btn">
                        ‚úì Active
                    </button>
                    <button onclick="moveToList('someday')" class="process-option todo-btn">
                        ‚è≥ Someday/Maybe
                    </button>
                    <button onclick="moveToList('awaiting')" class="process-option todo-btn">
                        ‚è±Ô∏è Awaiting
                    </button>
                </div>

                <button onclick="closeMoveModal()" class="modal-close">Cancel</button>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-btn" data-page="capture">
                <span class="nav-icon">‚úèÔ∏è</span>
                <span class="nav-label">Capture</span>
            </button>
            <button class="nav-btn" data-page="inbox">
                <span class="nav-icon">üì•</span>
                <span class="nav-label">Inbox</span>
            </button>
            <button class="nav-btn" data-page="todos">
                <span class="nav-icon">‚úì</span>
                <span class="nav-label">To-Dos</span>
            </button>
            <button class="nav-btn" data-page="thoughts">
                <span class="nav-icon">üí≠</span>
                <span class="nav-label">Thoughts</span>
            </button>
        </nav>
    </div>

    <script src="app.js"></script>
    <script>
        // Register service worker for PWA functionality
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js')
                .then(reg => console.log('Service Worker registered', reg))
                .catch(err => console.log('Service Worker registration failed', err));
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Flowlyfe - Capture thoughts instantly, process them later">
    <meta name="theme-color" content="#8D6E63">

    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="icons/icon-surfing-i.svg">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">

    <title>Flowlyfe</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <header class="app-header">
            <h1 class="brand">Flowlyfe</h1>
            <button class="inbox-chip" id="inboxBtn" aria-label="Open Inbox">
                Inbox <span id="inboxBadge" class="badge">0</span>
            </button>
        </header>

        <div id="focusScrim" aria-hidden="true"></div>

        <main id="capturePage" class="page active">
            <section class="capture-wrap">
                <div class="capture-backdrop" aria-hidden="true"></div>
                <div class="capture-card" id="captureCard">
                    <textarea
                        id="captureInput"
                        class="capture-input"
                        placeholder="Flow your life‚Ä¶"
                    aria-label="Capture a thought"
                    rows="1"></textarea>

                    <button id="captureFab" class="fab" aria-label="Capture to Inbox">
                        <span class="fab-label">Let it flow away‚Ä¶</span>
                        <span class="fab-ripple" aria-hidden="true"></span>
                    </button>
                </div>
            </section>

            <div id="captureStatus" class="status-message"></div>
        </main>

        <main id="inboxPage" class="page">
            <div class="page-header">
                <h2>Inbox</h2>
            </div>
            <div id="inboxList" class="inbox-list">
                <!-- Items will be added here -->
            </div>
        </main>

        <main id="thoughtsPage" class="page">
            <div class="page-header">
                <h2>Thoughts & Ideas</h2>
            </div>
            <div id="thoughtsList" class="category-list">
                <!-- Items will be added here -->
            </div>
        </main>

        <main id="todosPage" class="page">
            <div class="page-header">
                <h2>To-Do Lists</h2>
            </div>

            <div class="todos-container">
                <section class="todo-section">
                    <h3>Active</h3>
                    <div id="activeTodosList" class="todo-list">
                        <!-- Active todos will be added here -->
                    </div>
                </section>

                <section class="todo-section">
                    <h3>Someday/Maybe</h3>
                    <div id="somedayTodosList" class="todo-list">
                        <!-- Someday todos will be added here -->
                    </div>
                </section>

                <section class="todo-section">
                    <h3>Awaiting</h3>
                    <div id="awaitingTodosList" class="todo-list">
                        <!-- Awaiting todos will be added here -->
                    </div>
                </section>
            </div>
        </main>

        <main id="journalPage" class="page">
            <section id="journalHomeView" class="journal-view active">
                <div class="journal-grid">
                    <button class="journal-card" data-journal-target="flowform">
                        <div class="journal-card-icon">üéØ</div>
                        <h3>Flowform</h3>
                        <p>Guided daily capture across feelings, gratitude, sparks, and highlights.</p>
                        <span class="journal-card-cta">Open Flowform</span>
                    </button>

                    <button class="journal-card" data-journal-target="freeform">
                        <div class="journal-card-icon">üìù</div>
                        <h3>Freeform</h3>
                        <p>Unstructured writing with soothing prompts and auto-save as you think.</p>
                        <span class="journal-card-cta">Start Writing</span>
                    </button>

                    <button class="journal-card" data-journal-target="roteform">
                        <div class="journal-card-icon">üå±</div>
                        <h3>Roteform</h3>
                        <p>Seven science-backed reflections to close the day with clarity.</p>
                        <span class="journal-card-cta">Begin Reflection</span>
                    </button>

                    <button class="journal-card" data-journal-target="done">
                        <div class="journal-card-icon">‚úÖ</div>
                        <h3>Done Log</h3>
                        <p>Celebrate completed tasks and see your progress by day.</p>
                        <span class="journal-card-cta">Review Wins</span>
                    </button>
                </div>

                <div class="journal-actions">
                    <button class="journal-secondary-btn" data-journal-target="entries">
                        üìö Browse My Entries
                    </button>
                </div>
            </section>

            <section id="journalFlowformView" class="journal-view">
                <div class="journal-scroll">
                    <button class="journal-back-btn" data-journal-target="home">‚Üê Journal Home</button>
                    <div id="flowformContainer" class="flowform-container"></div>
                </div>
            </section>

            <section id="journalFreeformView" class="journal-view">
                <div class="journal-scroll">
                    <button class="journal-back-btn" data-journal-target="home">‚Üê Journal Home</button>
                    <header class="journal-section-header">
                        <h3>Freeform Notebook</h3>
                        <p>Settle in, breathe, and pour your thoughts on a digital page.</p>
                    </header>

                    <label for="freeformTitle" class="journal-label">Title</label>
                    <input id="freeformTitle" class="journal-input" type="text" placeholder="Add a title or leave blank for today">

                    <label for="freeformContent" class="journal-label">Entry</label>
                    <textarea id="freeformContent" class="journal-textarea" rows="10" placeholder="Drawing a blank? Try a prompt below."></textarea>

                    <div class="journal-meta-row">
                        <div class="journal-word-count">Words: <span id="freeformWordCount">0</span></div>
                        <button id="freeformPromptBtn" class="journal-secondary-btn">‚ú® New Prompt</button>
                    </div>

                    <div class="journal-action-row">
                        <button class="journal-secondary-btn" data-journal-target="entries">üìö View Entries</button>
                        <button id="freeformSaveBtn" class="journal-primary-btn">Save Entry</button>
                    </div>

                    <div id="freeformStatus" class="journal-status"></div>
                </div>
            </section>

            <section id="journalRoteformView" class="journal-view">
                <div class="journal-scroll">
                    <button class="journal-back-btn" data-journal-target="home">‚Üê Journal Home</button>
                    <header class="journal-section-header">
                        <h3>Roteform Reflection</h3>
                        <p class="journal-date" id="roteformDateLabel">Today</p>
                        <p>Answer the prompts that resonate‚Äîeach response nudges you toward a grounded tomorrow.</p>
                    </header>

                    <form id="roteformForm" class="journal-form">
                        <div class="journal-question">
                            <label for="roteGratitude" class="journal-label">
                                1. What are three things you're grateful for today, and why?
                            </label>
                            <textarea id="roteGratitude" class="journal-textarea" rows="3" placeholder="List three specific things you appreciated today and explain what made them meaningful to you..."></textarea>
                        </div>

                        <div class="journal-question">
                            <label for="roteEmotions" class="journal-label">
                                2. What emotions did you experience today, and what sparked them?
                            </label>
                            <textarea id="roteEmotions" class="journal-textarea" rows="3" placeholder="Notice and name your emotions, then reflect on what situations or thoughts brought them up..."></textarea>
                        </div>

                        <div class="journal-question">
                            <label for="roteValues" class="journal-label">
                                3. Where did you feel most aligned with your values?
                            </label>
                            <textarea id="roteValues" class="journal-textarea" rows="3" placeholder="Reflect on moments when you felt aligned with your core values or what gives your life meaning..."></textarea>
                        </div>

                        <div class="journal-question">
                            <label for="roteGrowth" class="journal-label">
                                4. What challenge helped you grow today, and what did it teach you?
                            </label>
                            <textarea id="roteGrowth" class="journal-textarea" rows="3" placeholder="Describe a difficulty you faced and focus on what it taught you or how it helped you develop..."></textarea>
                        </div>

                        <div class="journal-question">
                            <label for="roteConnection" class="journal-label">
                                5. How did you connect meaningfully with others?
                            </label>
                            <textarea id="roteConnection" class="journal-textarea" rows="3" placeholder="Reflect on moments of genuine connection, kindness given or received, or quality time shared..."></textarea>
                        </div>

                        <div class="journal-question">
                            <label for="roteCompassion" class="journal-label">
                                6. If a friend lived your day, what would you tell them?
                            </label>
                            <textarea id="roteCompassion" class="journal-textarea" rows="3" placeholder="Practice self-compassion by considering what supportive, understanding words you'd offer a friend..."></textarea>
                        </div>

                        <div class="journal-question">
                            <label for="roteStory" class="journal-label">
                                7. What story does today tell about who you're becoming?
                            </label>
                            <textarea id="roteStory" class="journal-textarea" rows="3" placeholder="Consider how today's experiences fit into your larger life narrative and personal growth journey..."></textarea>
                        </div>
                    </form>

                    <div class="journal-progress">
                        <span id="roteformProgressText">0/7 reflections noted</span>
                        <div class="journal-progress-bar">
                            <div id="roteformProgressFill" class="journal-progress-fill"></div>
                        </div>
                    </div>

                    <div class="journal-action-row">
                        <button id="roteformDraftBtn" class="journal-secondary-btn">üíæ Save Draft</button>
                        <button id="roteformSaveBtn" class="journal-primary-btn">Save Entry</button>
                    </div>

                    <div id="roteformStatus" class="journal-status"></div>
                </div>
            </section>

            <section id="journalDoneView" class="journal-view">
                <div class="journal-scroll">
                    <button class="journal-back-btn" data-journal-target="home">‚Üê Journal Home</button>
                    <header class="journal-section-header">
                        <h3>Completed To-Dos</h3>
                        <p class="journal-date" id="doneSummaryDate"></p>
                    </header>

                    <div id="journalDoneList" class="journal-done-list"></div>
                </div>
            </section>

            <section id="journalEntriesView" class="journal-view">
                <div class="journal-scroll">
                    <button class="journal-back-btn" data-journal-target="home">‚Üê Journal Home</button>
                    <header class="journal-section-header">
                        <h3>My Entries</h3>
                        <p>All of your reflections stay on this device for quick review anytime‚Äîonline or off.</p>
                    </header>

                    <div class="journal-filters">
                        <input id="journalSearchInput" class="journal-input" type="search" placeholder="Search by title or note">
                        <select id="journalFilterSelect" class="journal-input">
                            <option value="all">All types</option>
                            <option value="flowform">Flowform</option>
                            <option value="freeform">Freeform</option>
                            <option value="roteform">Roteform</option>
                        </select>
                    </div>

                    <div id="journalEntriesList" class="journal-entries-list"></div>
                    <div id="journalEmptyState" class="journal-empty-state hidden">
                        <p>Your journal is waiting for its first story.</p>
                        <button class="journal-primary-btn" data-journal-target="freeform">Start Writing</button>
                    </div>
                </div>
            </section>

            <section id="journalDetailView" class="journal-view">
                <div class="journal-scroll">
                    <button class="journal-back-btn" data-journal-target="entries">‚Üê Back to Entries</button>
                    <article id="journalDetailContent" class="journal-detail"></article>
                    <div class="journal-action-row">
                        <button id="journalDeleteBtn" class="journal-danger-btn">üóë Delete Entry</button>
                        <button class="journal-secondary-btn" data-journal-target="entries">Done</button>
                    </div>
                </div>
            </section>
        </main>

        <!-- Process Modal -->
        <div id="processModal" class="modal">
            <div class="modal-content">
                <h3>Process Item</h3>
                <div id="processContent" class="process-content"></div>

                <div class="process-buttons">
                    <div class="todo-options">
                        <p class="option-label">To-Do:</p>
                        <button onclick="processTo('todos', 'active')" class="process-option todo-btn">
                            ‚úì Active
                        </button>
                        <button onclick="processTo('todos', 'someday')" class="process-option todo-btn">
                            ‚è≥ Someday
                        </button>
                        <button onclick="processTo('todos', 'awaiting')" class="process-option todo-btn">
                            ‚è±Ô∏è Awaiting
                        </button>
                    </div>

                    <p class="option-label store-label">Store Item As:</p>
                    <button onclick="processTo('thoughts')" class="process-option thoughts-btn">
                        üí≠ Thought/Idea
                    </button>

                    <button onclick="processTo('contacts')" class="process-option contacts-btn">
                        üë§ Contact
                    </button>

                    <button onclick="processTo('calendar')" class="process-option calendar-btn">
                        üìÖ Calendar Event
                    </button>
                </div>

                <button onclick="closeProcessModal()" class="modal-close">Cancel</button>
            </div>
        </div>

        <!-- Todo Detail Modal -->
        <div id="todoDetailModal" class="modal">
            <div class="modal-content">
                <h3>Task Details</h3>

                <div class="todo-edit-form">
                    <div class="form-group">
                        <label for="todoEditContent">Task</label>
                        <textarea id="todoEditContent" class="todo-edit-textarea" rows="5"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="todoEditDueDate">Due Date</label>
                        <input type="date" id="todoEditDueDate" class="todo-edit-input">
                    </div>

                    <div class="form-group">
                        <label for="todoEditDueTime">Due Time (optional)</label>
                        <input type="time" id="todoEditDueTime" class="todo-edit-input">
                    </div>

                    <div class="todo-detail-meta">
                        <p id="todoDetailTimestamp"></p>
                    </div>
                </div>

                <div class="process-buttons">
                    <button onclick="saveTodoFromDetail()" class="process-option" style="border-color: var(--primary-color); color: var(--primary-color); font-weight: 600;">
                        üíæ Save Changes
                    </button>
                    <button onclick="exportTodoToCalendar()" class="process-option calendar-btn" style="border-color: #D4A574;">
                        üìÖ Add to Calendar
                    </button>
                    <button onclick="moveTodoFromDetail()" class="process-option move-btn" style="border-color: var(--accent-water);">
                        ‚ÜîÔ∏è Move
                    </button>
                    <button onclick="deleteTodoFromDetail()" class="process-option" style="border-color: #C47B6B; color: #C47B6B;">
                        üóëÔ∏è Delete
                    </button>
                </div>

                <button onclick="closeTodoDetail()" class="modal-close">Close</button>
            </div>
        </div>

        <!-- Move Todo Modal -->
        <div id="moveModal" class="modal">
            <div class="modal-content">
                <h3>Move To-Do</h3>

                <div class="process-buttons">
                    <button onclick="moveToList('active')" class="process-option todo-btn">
                        ‚úì Active
                    </button>
                    <button onclick="moveToList('someday')" class="process-option todo-btn">
                        ‚è≥ Someday/Maybe
                    </button>
                    <button onclick="moveToList('awaiting')" class="process-option todo-btn">
                        ‚è±Ô∏è Awaiting
                    </button>
                </div>

                <button onclick="closeMoveModal()" class="modal-close">Cancel</button>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-btn" data-page="thoughts">
                <span class="nav-icon">üí≠</span>
                <span class="nav-label">Thoughts</span>
            </button>
            <button class="nav-btn" data-page="todos">
                <span class="nav-icon">‚úì</span>
                <span class="nav-label">To-Dos</span>
            </button>
            <button id="navCapture" class="nav-btn nav-btn-capture" data-page="capture" aria-label="Capture new item">
                <span class="nav-icon">‚úèÔ∏è</span>
            </button>
            <button id="navInbox" class="nav-btn" data-page="inbox">
                <span class="nav-icon">üì•</span>
                <span class="nav-label">Inbox</span>
            </button>
            <button class="nav-btn" data-page="journal">
                <span class="nav-icon">üìî</span>
                <span class="nav-label">Journal</span>
            </button>
        </nav>
    </div>

    <script src="app.js"></script>
    <script src="journal.js"></script>
    <script>
        // Register service worker for PWA functionality
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js')
                .then(reg => console.log('Service Worker registered', reg))
                .catch(err => console.log('Service Worker registration failed', err));
        }
    </script>
</body>
</html>
